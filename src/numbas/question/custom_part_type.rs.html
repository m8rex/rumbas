<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `numbas/src/question/custom_part_type.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>custom_part_type.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script><script defer src="../../../source-script.js"></script><script defer src="../../../source-files.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../numbas/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../numbas/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../numbas/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">  1</span>
<span id="2">  2</span>
<span id="3">  3</span>
<span id="4">  4</span>
<span id="5">  5</span>
<span id="6">  6</span>
<span id="7">  7</span>
<span id="8">  8</span>
<span id="9">  9</span>
<span id="10"> 10</span>
<span id="11"> 11</span>
<span id="12"> 12</span>
<span id="13"> 13</span>
<span id="14"> 14</span>
<span id="15"> 15</span>
<span id="16"> 16</span>
<span id="17"> 17</span>
<span id="18"> 18</span>
<span id="19"> 19</span>
<span id="20"> 20</span>
<span id="21"> 21</span>
<span id="22"> 22</span>
<span id="23"> 23</span>
<span id="24"> 24</span>
<span id="25"> 25</span>
<span id="26"> 26</span>
<span id="27"> 27</span>
<span id="28"> 28</span>
<span id="29"> 29</span>
<span id="30"> 30</span>
<span id="31"> 31</span>
<span id="32"> 32</span>
<span id="33"> 33</span>
<span id="34"> 34</span>
<span id="35"> 35</span>
<span id="36"> 36</span>
<span id="37"> 37</span>
<span id="38"> 38</span>
<span id="39"> 39</span>
<span id="40"> 40</span>
<span id="41"> 41</span>
<span id="42"> 42</span>
<span id="43"> 43</span>
<span id="44"> 44</span>
<span id="45"> 45</span>
<span id="46"> 46</span>
<span id="47"> 47</span>
<span id="48"> 48</span>
<span id="49"> 49</span>
<span id="50"> 50</span>
<span id="51"> 51</span>
<span id="52"> 52</span>
<span id="53"> 53</span>
<span id="54"> 54</span>
<span id="55"> 55</span>
<span id="56"> 56</span>
<span id="57"> 57</span>
<span id="58"> 58</span>
<span id="59"> 59</span>
<span id="60"> 60</span>
<span id="61"> 61</span>
<span id="62"> 62</span>
<span id="63"> 63</span>
<span id="64"> 64</span>
<span id="65"> 65</span>
<span id="66"> 66</span>
<span id="67"> 67</span>
<span id="68"> 68</span>
<span id="69"> 69</span>
<span id="70"> 70</span>
<span id="71"> 71</span>
<span id="72"> 72</span>
<span id="73"> 73</span>
<span id="74"> 74</span>
<span id="75"> 75</span>
<span id="76"> 76</span>
<span id="77"> 77</span>
<span id="78"> 78</span>
<span id="79"> 79</span>
<span id="80"> 80</span>
<span id="81"> 81</span>
<span id="82"> 82</span>
<span id="83"> 83</span>
<span id="84"> 84</span>
<span id="85"> 85</span>
<span id="86"> 86</span>
<span id="87"> 87</span>
<span id="88"> 88</span>
<span id="89"> 89</span>
<span id="90"> 90</span>
<span id="91"> 91</span>
<span id="92"> 92</span>
<span id="93"> 93</span>
<span id="94"> 94</span>
<span id="95"> 95</span>
<span id="96"> 96</span>
<span id="97"> 97</span>
<span id="98"> 98</span>
<span id="99"> 99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
</pre><pre class="rust"><code><span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::jme::EmbracedJMEString</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::jme::JMENotesString</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::jme::JMEString</span>;
<span class="kw">use</span> <span class="ident"><span class="kw">crate</span>::support::answer_style::AnswerStyle</span>;
<span class="kw">use</span> <span class="ident">schemars::JsonSchema</span>;
<span class="kw">use</span> <span class="ident">serde::Deserialize</span>;
<span class="kw">use</span> <span class="ident">serde::Serialize</span>;
<span class="kw">use</span> <span class="ident">serde_with::skip_serializing_none</span>;

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartType</span> {
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">short_name</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">description</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">settings</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">CustomPartTypeSetting</span><span class="op">&gt;</span>,
    <span class="kw">pub</span> <span class="ident">help_url</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">public_availability</span>: <span class="ident">CustomPartAvailability</span>,
    <span class="kw">pub</span> <span class="ident">marking_script</span>: <span class="ident">JMENotesString</span>,
    <span class="kw">pub</span> <span class="ident">can_be_gap</span>: <span class="ident">bool</span>,
    <span class="kw">pub</span> <span class="ident">can_be_step</span>: <span class="ident">bool</span>,
    <span class="kw">pub</span> <span class="ident">marking_notes</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">CustomPartMarkingNote</span><span class="op">&gt;</span>,
    <span class="kw">pub</span> <span class="ident">published</span>: <span class="ident">bool</span>,
    <span class="kw">pub</span> <span class="ident">extensions</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>,
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">input_widget</span>: <span class="ident">CustomPartInputWidget</span>,
    <span class="comment">//TODO source</span>
}

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartMarkingNote</span> {
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">definition</span>: <span class="ident">JMEString</span>,
    <span class="kw">pub</span> <span class="ident">description</span>: <span class="ident">String</span>,
}

<span class="kw">impl</span> <span class="ident">std::convert::From</span><span class="op">&lt;</span><span class="ident"><span class="kw">crate</span>::jme::ast::Note</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">CustomPartMarkingNote</span> {
    <span class="kw">fn</span> <span class="ident">from</span>(<span class="ident">note</span>: <span class="ident"><span class="kw">crate</span>::jme::ast::Note</span>) -&gt; <span class="self">Self</span> {
        <span class="ident">CustomPartMarkingNote</span> {
            <span class="ident">name</span>: <span class="ident">note</span>.<span class="ident">name</span>.<span class="ident">to_string</span>(),
            <span class="ident">definition</span>: <span class="ident">note</span>.<span class="ident">expression_string</span>(),
            <span class="ident">description</span>: <span class="ident">note</span>.<span class="ident">description</span>.<span class="ident">unwrap_or_else</span>(<span class="op">|</span><span class="op">|</span> <span class="string">&quot;&quot;</span>.<span class="ident">to_string</span>()),
        }
    }
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="attribute">#[<span class="ident">serde</span>(<span class="ident">tag</span> <span class="op">=</span> <span class="string">&quot;input_widget&quot;</span>, <span class="ident">content</span> <span class="op">=</span> <span class="string">&quot;input_options&quot;</span>)]</span>
<span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">CustomPartInputWidget</span> {
    <span class="comment">//TODO other types: https://numbas-editor.readthedocs.io/en/latest/custom-part-types/reference.html</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;string&quot;</span>)]</span>
    <span class="doccomment">/// The student enters a single line of text.</span>
    <span class="ident">String</span>(<span class="ident">CustomPartStringInputOptions</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;number&quot;</span>)]</span>
    <span class="doccomment">/// The student enters a number, using any of the allowed notation styles. If the student’s answer is not a valid number, they are shown a warning and can not submit the part.</span>
    <span class="ident">Number</span>(<span class="ident">CustomPartNumberInputOptions</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;radios&quot;</span>)]</span>
    <span class="doccomment">/// The student chooses one from a list of choices by selecting a radio button.</span>
    <span class="ident">RadioButtons</span>(<span class="ident">CustomPartRadioButtonsInputOptions</span>),
}

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">T</span>: <span class="ident">Clone</span><span class="op">&gt;</span> {
    <span class="kw">pub</span> <span class="ident">value</span>: <span class="ident">T</span>,
    <span class="doccomment">/// A static field takes the same value in every instance of the part type. A dynamic field is defined by a JME expression which is evaluated when the question is run.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;static&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">is_static</span>: <span class="ident">bool</span>,
}

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartStringInputOptions</span> {
    <span class="comment">//TODO? hint &amp; correctAnswer is shared for all..., macro?</span>
    <span class="kw">pub</span> <span class="ident">hint</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>, <span class="comment">// A string displayed next to the input field, giving any necessary information about how to enter their answer.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;correctAnswer&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">correct_answer</span>: <span class="ident">JMEString</span>, <span class="comment">// A JME expression which evaluates to the expected answer to the part.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;allowEmpty&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">allow_empty</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span>, <span class="comment">// If false, the part will only be marked if their answer is non-empty.</span>
}

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartNumberInputOptions</span> {
    <span class="kw">pub</span> <span class="ident">hint</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>, <span class="comment">// A string displayed next to the input field, giving any necessary information about how to enter their answer.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;correctAnswer&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">correct_answer</span>: <span class="ident">JMEString</span>, <span class="comment">// A JME expression which evaluates to the expected answer to the part.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;allowFractions&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">allow_fractions</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span>, <span class="comment">//Allow the student to enter their answer as a fraction?</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;allowedNotationStyles&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">allowed_notation_styles</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">AnswerStyle</span><span class="op">&gt;</span><span class="op">&gt;</span>,
}

<span class="attribute">#[<span class="ident">skip_serializing_none</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartRadioButtonsInputOptions</span> {
    <span class="kw">pub</span> <span class="ident">hint</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>, <span class="comment">// A string displayed next to the input field, giving any necessary information about how to enter their answer.</span>
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;correctAnswer&quot;</span>)]</span>
    <span class="kw">pub</span> <span class="ident">correct_answer</span>: <span class="ident">JMEString</span>, <span class="comment">// A JME expression which evaluates to the expected answer to the part.</span>
    <span class="doccomment">/// The labels for the choices to offer to the student.</span>
    <span class="kw">pub</span> <span class="ident">choices</span>: <span class="ident">CustomPartInputOptionValue</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="op">&gt;</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">CustomPartAvailability</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;always&quot;</span>)]</span>
    <span class="ident">Always</span>,
}

<span class="comment">// TODO: other</span>
<span class="comment">// https://docs.numbas.org.uk/en/latest/custom-part-types/reference.html?highlight=Custom#setting-types</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="attribute">#[<span class="ident">serde</span>(<span class="ident">tag</span> <span class="op">=</span> <span class="string">&quot;input_type&quot;</span>)]</span>
<span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">CustomPartTypeSetting</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;checkbox&quot;</span>)]</span>
    <span class="ident">CheckBox</span>(<span class="ident">CustomPartTypeSettingCheckBox</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;code&quot;</span>)]</span>
    <span class="ident">Code</span>(<span class="ident">CustomPartTypeSettingCode</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;mathematical_expression&quot;</span>)]</span>
    <span class="ident">MathematicalExpression</span>(<span class="ident">CustomPartTypeSettingMathematicalExpression</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;string&quot;</span>)]</span>
    <span class="ident">String</span>(<span class="ident">CustomPartTypeSettingString</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;dropdown&quot;</span>)]</span>
    <span class="ident">DropDown</span>(<span class="ident">CustomPartTypeSettingDropDown</span>),
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;percent&quot;</span>)]</span>
    <span class="ident">Percentage</span>(<span class="ident">CustomPartTypeSettingPercentage</span>),
    <span class="comment">// TODO see https://numbas-editor.readthedocs.io/en/latest/custom-part-types/reference.html?highlight=content%20area#setting-types</span>
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingSharedData</span> {
    <span class="doccomment">/// A short name for this setting, used to refer to it in the part type’s answer input or marking algorithm. The name should uniquely identify the setting, but doesn’t need to be very descriptive - the label can do that.</span>
    <span class="kw">pub</span> <span class="ident">name</span>: <span class="ident">String</span>,
    <span class="doccomment">/// The label shown next to the setting in the question editor. Try to make it as clear as possible what the setting is for. For example, a checkbox which dictates whether an input hint is shown should be labelled something like “Hide the input hint?” rather than “Input hint visibility” - the latter doesn’t tell the question author whether ticking the checkbox will result in the input hint appearing or not.</span>
    <span class="kw">pub</span> <span class="ident">label</span>: <span class="ident">String</span>,
    <span class="doccomment">/// The address of documentation explaining this setting in further depth.</span>
    <span class="kw">pub</span> <span class="ident">help_url</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>,
    <span class="doccomment">/// Use this field to give further guidance to question authors about this setting, if the label is not enough. For example, you might use this to say what data type a JME code setting should evaluate to.</span>
    <span class="kw">pub</span> <span class="ident">hint</span>: <span class="ident">String</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingString</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;subvars&quot;</span>)]</span>
    <span class="doccomment">/// If this is ticked, then JME expressions enclosed in curly braces will be evaluated and the results substituted back into the text when the question is run. Otherwise, the string will be untouched.</span>
    <span class="kw">pub</span> <span class="ident">evaluate_enclosed_expressions</span>: <span class="ident">bool</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">String</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingMathematicalExpression</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">rename</span> <span class="op">=</span> <span class="string">&quot;subvars&quot;</span>)]</span>
    <span class="doccomment">///  If this is ticked, then JME expressions enclosed in curly braces will be evaluated and the results substituted back into the string.</span>
    <span class="kw">pub</span> <span class="ident">evaluate_enclosed_expressions</span>: <span class="ident">bool</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">EmbracedJMEString</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingCode</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">JMEString</span>,
    <span class="kw">pub</span> <span class="ident">evaluate</span>: <span class="ident">bool</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingCheckBox</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">bool</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingDropDown</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">choices</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">CustomPartTypeSettingDropDownChoice</span><span class="op">&gt;</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingDropDownChoice</span> {
    <span class="kw">pub</span> <span class="ident">value</span>: <span class="ident">String</span>,
    <span class="kw">pub</span> <span class="ident">label</span>: <span class="ident">String</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Serialize</span>, <span class="ident">Deserialize</span>, <span class="ident">JsonSchema</span>, <span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CustomPartTypeSettingPercentage</span> {
    <span class="attribute">#[<span class="ident">serde</span>(<span class="ident">flatten</span>)]</span>
    <span class="kw">pub</span> <span class="ident">shared_data</span>: <span class="ident">CustomPartTypeSettingSharedData</span>,
    <span class="doccomment">/// The initial value of the setting in the question editor. If the setting has a sensible default value, set it here. If the value of the setting is likely to be different for each instance of this part type, leave this blank.</span>
    <span class="kw">pub</span> <span class="ident">default_value</span>: <span class="ident">String</span>,
}
</code></pre></div>
</section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="numbas" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (2681f253b 2022-02-01)" ></div>
</body></html>